To make the problem we want to solve precise, let us first recall that  the most general prepare-and-measure behaviors involving strictly classical variables are those in $\mathcal{C}^\lambda_{d,B,X,Y}$ (eq.~\eqref{eq:pam-classical-sr}).  Contrastingly, the $\mathcal{Q}_{d,B,X,Y}$ contain the \emph{least} general quantum behaviors, which are those needing only quantum preparations with independent devices (sec. \ref{sec:quantum-preparations}). The relation $\mathcal{C}_{d,B,X,Y}^\lambda \subset \mathcal{Q}_{d,B,X,Y}$  reflects the fact that some behaviors arising from quantum preparations are nevertheless in $\mathcal{C}_{d,B,X,Y}^\lambda$, while others are definitely not. Those which are, can naturally be simulated by classical preparations with shared randomness. Hereafter, we will call any behavior in the $\mathcal{C}^\lambda_{d,B,X,Y}$ \emph{classically reproducible/simulatable} --- or just \emph{classical}, for short.

It is important to keep in mind that several distinct notions of classicality do exist in the literature. As is the case of entanglement measures, some applications may call for a classicality model or another. Our choice is general in the sense discussed in chap. \ref{chap:pam}, while also being in line with widely studied locality models in other correlation scenarios.

Our first task will be the following. Suppose a behavior $\mathbf{p}$ arose from a set $\mathcal{S}$ of $X$ quantum preparations, subject to $Y$ possible (uncharacterized) measurements with $B$ outcomes each, and that furthermore it is classically reproducible with \emph{d}its. This means that $\mathbf{p} \in \mathcal{C}_{d,B,X,Y}^\lambda$. But it does \emph{not} mean that $\mathcal{S}$ always behaves classically, for it may be the case that increasing the number measurement choices would reveal nonclassicality \cite{poderini}. To better understand what makes quantum preparations behave classically of not, we must take the measurements limitation out of the way. Certifying that $\mathcal{S}$ is classical for unbounded $Y$ (i.e., irrespective of which and how many measurements Bob may employ) is precisely the task we aim to solve in sec. \ref{sec:classical-preparations}.

Before tackling that, it is both instructive and useful to further discuss the $\mathbf{p} \in \mathcal{C}_{d,B,X,Y}^\lambda$ membership problem. As previously discussed, any $\mathcal{C}_{d,B,X,Y}^\lambda$ is a polytope, thus set membership can be certified through compliance with a finite set of linear inequalities representing its facets. If one is given the facets, this a computationally easy problem, but obtaining the facets is not. The whole complexity of the problem then lies in characterizing a the polytope for a given scenario. As first noticed in \cite{gallego}, this can be done by enumerating all of $\mathcal{C}_{d,B,X,Y}^\lambda$'s extremal points and then finding their convex hull (see sec. \ref{sec:convexity}). The extremal points are found from eq.~\eqref{eq:pam-classical-independent} when the response functions are deterministic. Their enumeration can be cast as the following procedure.

Let $\mathbf{p}_D = \left( p(b \mid x, y) \right)_{b, x, y}$ be an ordered list representing a behavior. To simplify the notation, let us consider $b \in \{ 0, 1\}$ (the generalization is straightforward) and write $\mathbf{p}_D = \left( \mathbf{v}_x \right)_{x=1}^X$, where $\mathbf{v}_x = \left( p(b = 0 \mid x, 1), \ldots, p(b = 0 \mid x, Y ) \right)$. Only the $b=0$ probabilities must be considered, as $p(1 \mid x, y) = 1 - p(0 \mid x, y)$. A deterministic behavior is valued as $1$ for one of the outcomes and, of course, $0$ for all others. Whenever $d = X$, there will be $2^{XY}$ distinct $\mathbf{p}_D$ vectors. In this $B=2$ case, those are exactly all possible $XY$-length $d$itstrings but, in the general case, there will be $(B-1)^{XY}$ vectors corresponding to only those $(B-1)XY$-length $d$itstrings with a single $1$ in each $B-1$-length consecutive substring. We can think of each of these vectors as a deterministic strategy where Alice's choice of $x$ is unambiguously encoded in a classical state $\tau_x$, from which Bob may then perfectly recover $x$ through classical post-processing. The nontrivial case happens when $d < X$. Then there are only $d$ distinct classical preparations. As the preparation box has more buttons than distinct classical states, some of the preparations will be repeated. Whenever $\tau_i = \tau_j$, obviously $\mathbf{v}_i = \mathbf{v}_j$, hence our vector $\mathbf{p}_D$ will have $d - X$ repeated sublists. With this in mind, enumerating all possible deterministic points amounts to generating every unique $dY$-length ditstrings, then repeating $d-X$ blocks (corresponding to choices of $\mathbf{v}_x$), in all allowed positions. In the $B>2$ case, the procedure is analogous, except that not all $(B-1)dY$-length bitstrings are valid.

Generally, the number of deterministic points scales exponentially as $N_\lambda \propto (B-1)^{dY}$, which makes the change to the hyperplane description intractable for all but the smallest parameters. One solvable case that will be used in sec. \ref{sec:nonclassicality-activation} is for $\mathcal{C}_{2,2,4,2}$, where the polytope is defined by the two following classes of nontrivial inequalities \cite{poderini}
\warning{Review $S$: this is not the same form we used in the paper but is the "standard" form and I don't recall why we used this instead of the other}
$$
S = E_{11} + E_{12} + E_{21} - E_{22} - E_{31} + E_{32} - E_{41} - E_{42} \leq 4,
$$
$$
S^\prime = E_{11} + E_{12} + E_{21} - E_{22} - E_{41} \leq 3
$$
where the $E_{xy}=\condprob{b=0}{x,y}-\condprob{b=1}{x,y}$ are the so-called \emph{correlators}.

Framing it with quantum preparations, this scenario corresponds to a set $\mathcal{S}$ with $X=4$ possible $d=2$-dimensional quantum systems (qubits) that will be prepared by Alice's device then measured by Bob's. He will have $Y=2$ choices of POVMs, where each POVM is composed of $B=2$ effects. One of the interesting facts in this scenario (as well as many other PM settings) is that some quantum preparations and measurements, even with independent devices, can violate inequalities $S$ and $S^\prime$ (fig. \ref{fig:classical-vs-quantum-sets}). When this happens, it means they are better at encoding the choices of $x$ than even the best possible classical strategy with shared randomness. Or rather, that the behavior is not classically reproducible.



